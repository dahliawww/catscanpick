@import url("https://fonts.googleapis.com/css2?family=Kirang+Haerang&display=swap");

@tailwind base;
@tailwind components;
@tailwind utilities;

/* 載入 jf-openhuninn 字型 */
@font-face {
  font-family: "jf-openhuninn";
  src: url("/fonts/jf-openhuninn-2.1.ttf") format("truetype");
  font-weight: normal;
  font-style: normal;
  font-display: swap;
}

@layer base {
  body {
    @apply text-[#333333] font-huninn;
  }
}

/* 跳至主內容連結：鍵盤聚焦時顯示 */
.skip-link {
  @apply fixed left-4 top-4 z-[100] rounded-md bg-slate-800 px-4 py-2 text-white no-underline opacity-0 transition-opacity focus:opacity-100 focus:outline-none focus:ring-2 focus:ring-slate-400;
}
.skip-link:not(:focus) {
  @apply -translate-x-[9999px];
}
.skip-link:focus {
  @apply translate-x-0 opacity-100;
}

@layer components {
  /* Table Header Styles */
  .table-thead {
    @apply bg-slate-800;
  }

  .table-th-base {
    @apply sticky top-0 z-10 px-4 py-4 text-sm font-semibold bg-slate-600 text-white border-b border-slate-400 whitespace-nowrap;
  }

  .table-th-sticky {
    @apply sticky top-0 left-0 z-20 px-4 py-4 text-sm font-semibold text-left text-white border-b border-slate-400 whitespace-nowrap bg-slate-800;
  }

  /* Table Body Styles */
  .table-tbody {
    @apply divide-y divide-slate-300;
  }

  .table-tr {
    @apply transition-colors duration-150 hover:bg-brand-beige/30;
  }

  .table-td-base {
    @apply px-4 py-4 text-sm text-[#333333] border-b border-slate-300 whitespace-nowrap;
  }

  .table-td-center {
    @apply px-4 py-4 text-sm text-center text-[#333333] border-b border-slate-300 whitespace-nowrap;
  }

  .table-td-sticky {
    @apply sticky  left-0 z-10 px-4 py-4 text-sm font-medium text-[#333333] bg-brand-lightpink 
    border-r border-slate-300 whitespace-nowrap;
  }

  .table-td-taurine {
    @apply px-4 py-4 text-sm font-semibold text-center border-b border-slate-300 text-text-dark whitespace-nowrap;
  }

  /* Form */
  .form-label {
    @apply block mb-2 text-sm font-medium text-slate-800 font-huninn;
  }
  .form-label-tight {
    @apply block mb-1 text-sm font-medium text-slate-700 font-huninn;
  }
  .input {
    @apply w-full p-3 text-sm transition-all duration-200 bg-white border-2 rounded-lg text-slate-800 border-slate-600 font-huninn focus:outline-none focus:ring-2 focus:ring-brand-yellow focus:border-brand-yellow;
  }
  .input-readonly {
    @apply w-full p-3 text-sm border-2 rounded-lg bg-slate-100 text-slate-800 border-slate-400 font-huninn;
  }
  .suggestions-list {
    @apply absolute z-10 w-full py-1 mt-1 overflow-y-auto bg-white border-2 rounded-lg shadow-lg border-slate-400 max-h-48 font-huninn;
  }
  .suggestion-item {
    @apply px-3 py-2 text-sm cursor-pointer text-slate-800 hover:bg-slate-100;
  }

  /* Modal */
  .modal-overlay {
    @apply fixed inset-0 z-[9999] flex items-center justify-center p-4 bg-black/50;
  }
  .modal-content {
    @apply w-full max-w-sm p-6 bg-white border-8 shadow-xl rounded-xl border-brand-pink font-huninn;
  }
  .modal-title {
    @apply pb-2 mb-4 text-lg font-bold border-b text-slate-800 border-slate-400;
  }
  .btn-primary-slate {
    @apply px-4 py-2 text-sm font-medium text-white rounded-lg bg-slate-600 hover:bg-slate-700;
  }
  .btn-primary-slate-full {
    @apply w-full mt-4 px-4 py-2 text-sm font-medium text-white rounded-lg bg-slate-600 hover:bg-slate-700;
  }
  .btn-secondary-brand {
    @apply px-4 py-3 text-sm font-medium transition-colors rounded-lg text-slate-800 font-huninn bg-brand-lightpink hover:bg-brand-pink disabled:opacity-50 disabled:cursor-not-allowed;
  }

  /* Card (e.g. daily needs block) */
  .card-clickable {
    @apply px-4 py-4 transition-colors border-2 rounded-lg shadow-lg cursor-pointer border-brand-yellow bg-brand-yellow/10 hover:bg-brand-yellow/20;
  }

  /* Filter dropdown */
  .filter-trigger {
    @apply flex items-center justify-between w-full px-4 py-3 font-medium text-[#333333] bg-white border-2 border-slate-400 rounded-md hover:bg-gray-50 focus:outline-none focus:border-slate-600;
  }
  .filter-trigger-alt {
    @apply flex items-center justify-between w-full h-full px-4 py-3 font-medium text-[#333333] border-2 rounded-md border-slate-400 bg-slate-200 hover:bg-slate-300 focus:outline-none focus:border-slate-600;
  }
  .filter-dropdown {
    @apply absolute z-50 w-full mt-2 overflow-y-auto bg-white border-2 rounded-lg shadow-lg border-slate-400;
  }
  .filter-option {
    @apply flex items-center px-3 py-2 font-medium text-[#333333] transition-colors rounded-lg cursor-pointer hover:bg-gray-100;
  }
  .filter-option-item {
    @apply flex items-center px-3 py-2 font-medium text-[#333333] transition-colors rounded-lg cursor-pointer hover:bg-gray-200;
  }
  .filter-checkbox {
    @apply relative w-4 h-4 border-2 rounded cursor-pointer transition-colors;
  }
  .filter-checkbox-checked {
    @apply bg-slate-600 border-slate-600;
  }
  .filter-checkbox-unchecked {
    @apply border-slate-400 bg-white;
  }
  .filter-clear-btn {
    @apply w-full px-3 py-2 font-medium text-[#333333] transition-colors bg-white border-2 border-gray-400 rounded-lg hover:bg-gray-100;
  }
  .dropdown-divider {
    @apply my-1 border-t border-primary-dark/50;
  }
  .dropdown-footer-border {
    @apply p-2 border-t border-gray-400;
  }

  /* Select dropdown arrow */
  .select-dropdown {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
    background-position: right 0.5rem center;
    background-repeat: no-repeat;
    background-size: 1.5em 1.5em;
    appearance: none;
  }

  /* Cat Styles */
  .cat-wrapper {
    position: absolute;
    pointer-events: none;
  }

  .cat-figure {
    width: 110px;
    height: 50px;
    position: relative;
    border-top-left-radius: 100px;
    border-top-right-radius: 100px;
  }

  /* Body */
  .cat-body {
    width: 110px;
    height: 50px;
    background-color: #cbd5e1;
    position: absolute;
    border-top-left-radius: 100px;
    border-top-right-radius: 100px;
    animation: cat-body-animate 12s none infinite;
  }

  /* Head */
  .cat-head {
    width: 70px;
    height: 35px;
    background-color: #cbd5e1;
    position: absolute;
    top: calc(50% - 10px);
    left: -40px;
    border-top-left-radius: 80px;
    border-top-right-radius: 80px;
  }

  /* Ears */
  .cat-ear {
    position: absolute;
    width: 0;
    height: 0;
    border-left: 12px solid transparent;
    border-right: 12px solid transparent;
    border-bottom: 20px solid #cbd5e1;
  }

  .cat-ear-left {
    left: 4px;
    top: -4px;
    transform: rotate(-30deg);
    animation: cat-left-ear-animate 12s both infinite;
  }

  .cat-ear-right {
    top: -12px;
    left: 30px;
    animation: cat-right-ear-animate 12s both infinite;
  }

  /* Face */
  .cat-face {
    position: absolute;
    top: calc(50% - 10px);
    left: -40px;
    width: 70px;
    height: 35px;
  }

  /* Tail Container */
  .cat-tail-container {
    position: absolute;
    right: 0;
    bottom: -25px;
    z-index: 3;
  }

  .cat-tail-segment {
    position: absolute;
    height: 30px;
    width: 14px;
    bottom: -10px;
    right: 0;
    border-bottom-right-radius: 5px;
    background: #cbd5e1;
    z-index: 0;
    transform-origin: left;
  }

  .cat-tail-segment > .cat-tail-segment {
    animation: cat-tail-animate 15s none infinite;
    height: 100%;
    width: 14px;
    border-bottom-left-radius: 20px 20px;
    border-bottom-right-radius: 20px 20px;
    border-top-right-radius: 40px;
  }

  /* Animations */
  @keyframes cat-body-animate {
    6.67% {
      transform: scaleY(1);
    }
    10% {
      transform: scaleY(1.15);
    }
    16.67% {
      transform: scaleY(1);
    }
    20% {
      transform: scaleY(1.25);
    }
    26.67% {
      transform: scaleY(1);
    }
    46.67% {
      transform: scaleY(1.15);
    }
    53.33% {
      transform: scaleY(1);
    }
    56.67% {
      transform: scaleY(1.15);
    }
    100% {
      transform: scaleY(1);
    }
  }

  @keyframes cat-left-ear-animate {
    0% {
      transform: rotate(-20deg);
    }
    6.67% {
      transform: rotate(-6deg);
    }
    13.33% {
      transform: rotate(-15deg);
    }
    26.67% {
      transform: rotate(-15deg);
    }
    33.33% {
      transform: rotate(-30deg);
    }
    40% {
      transform: rotate(-30deg);
    }
    46.67% {
      transform: rotate(0deg);
    }
    53.33% {
      transform: rotate(0deg);
    }
    60% {
      transform: rotate(-15deg);
    }
    80% {
      transform: rotate(-15deg);
    }
    93.33% {
      transform: rotate(-6deg);
    }
    100% {
      transform: rotate(-6deg);
    }
  }

  @keyframes cat-right-ear-animate {
    0% {
      transform: rotateZ(-16deg);
    }
    6.67% {
      transform: rotateZ(-16deg);
    }
    13.33% {
      transform: rotateZ(-19deg);
    }
    26.67% {
      transform: rotateZ(-19deg);
    }
    33.33% {
      transform: rotateZ(-30deg);
    }
    36.67% {
      transform: rotateZ(-19deg);
    }
    37.33% {
      transform: rotateZ(-30deg);
    }
    38% {
      transform: rotateZ(-19deg);
    }
    40% {
      transform: rotateZ(-19deg);
    }
    40.67% {
      transform: rotateZ(-30deg);
    }
    41.33% {
      transform: rotateZ(-19deg);
    }
    46.67% {
      transform: rotateZ(-9deg);
    }
    53.33% {
      transform: rotateZ(-9deg);
    }
    60% {
      transform: rotateZ(-19deg);
    }
    60.67% {
      transform: rotateZ(-30deg);
    }
    61.33% {
      transform: rotateZ(-19deg);
    }
    62.67% {
      transform: rotateZ(-19deg);
    }
    63.33% {
      transform: rotateZ(-30deg);
    }
    64% {
      transform: rotateZ(-19deg);
    }
    80% {
      transform: rotateZ(-19deg);
    }
    93.33% {
      transform: rotateZ(-16deg);
    }
    100% {
      transform: rotateZ(-16deg);
    }
  }

  @keyframes cat-tail-animate {
    6.67% {
      transform: rotate(0deg);
    }
    10% {
      transform: rotate(10deg);
    }
    16.67% {
      transform: rotate(-5deg);
    }
    20% {
      transform: rotate(30deg);
    }
    26.67% {
      transform: rotate(-2deg);
    }
    46.67% {
      transform: rotate(10deg);
    }
    53.33% {
      transform: rotate(-5deg);
    }
    56.67% {
      transform: rotate(10deg);
    }
    100% {
      transform: rotate(0deg);
    }
  }

  /* Cat Ani Styles */
  .cat-ani-wrapper {
    position: relative;
    border-top-left-radius: 100px;
    border-top-right-radius: 100px;
    transform: scale(0.7);
    transform-origin: top left;
  }

  @media (min-width: 768px) {
    .cat-ani-wrapper {
      transform: scale(0.9);
    }
  }

  .cat-ani-figure {
    position: relative;
  }

  /* Body - SVG */
  .cat-ani-body {
    position: relative;
    z-index: 1;
    width: 100%;
    height: auto;
  }

  .cat-ani-body-svg {
    width: 95%;
    height: auto;
    max-width: 300px;
    min-width: 200px;
    display: block;
  }

  /* Front Paws */
  .cat-ani-paws {
    position: absolute;
    bottom: 24px;
    left: 5px;
    width: 100%;
    height: 100%;
    z-index: 2;
  }

  .cat-ani-paw-svg {
    position: absolute;
    width: 60px;
    height: auto;
    bottom: 0;
    transform-origin: bottom right;
    animation: cat-ani-paw-animate 5s ease-in-out infinite;
  }

  /* Tail Container */
  .cat-ani-tail-container {
    position: absolute;
    right: 40px;
    bottom: 10%;
    z-index: 3;
  }

  .cat-ani-tail-segment {
    position: absolute;
    height: 30px;
    width: 14px;
    bottom: -10px;
    right: 0;
    border-bottom-right-radius: 5px;
    background: #cbd5e1;
    z-index: 0;
    transform-origin: left;
  }

  .cat-ani-tail-segment > .cat-ani-tail-segment {
    animation: cat-ani-tail-swing 3s ease-in-out infinite;
    height: 100%;
    width: 14px;
    border-bottom-left-radius: 20px 20px;
    border-bottom-right-radius: 20px 20px;
    border-top-right-radius: 40px;
  }

  /* Cat Ani Paw Animation - rotate from bottom as pivot point */
  @keyframes cat-ani-paw-animate {
    0% {
      transform: rotate(0deg);
    }
    25% {
      transform: rotate(-3deg);
    }
    75% {
      transform: rotate(2deg);
    }
    50% {
      transform: rotate(2deg);
    }
    100% {
      transform: rotate(0deg);
    }
  }

  /* Cat Ani Tail Animation */
  @keyframes cat-ani-tail-swing {
    0% {
      transform: rotate(0deg);
    }
    25% {
      transform: rotate(10deg);
    }
    50% {
      transform: rotate(-10deg);
    }
    75% {
      transform: rotate(15deg);
    }
    100% {
      transform: rotate(0deg);
    }
  }
}

.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}
